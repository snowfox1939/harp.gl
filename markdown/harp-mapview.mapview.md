<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@here/harp-mapview](./harp-mapview.md) &gt; [MapView](./harp-mapview.mapview.md)

## MapView class

The core class of the library to call in order to create a map visualization. It needs to be linked to datasources.

<b>Signature:</b>

```typescript
export declare class MapView extends THREE.EventDispatcher 
```

## Constructors

|  Constructor | Modifiers | Description |
|  --- | --- | --- |
|  [(constructor)(options)](./harp-mapview.mapview._constructor_.md) |  | Constructs a new <code>MapView</code> with the given options or canvas element. |

## Properties

|  Property | Modifiers | Type | Description |
|  --- | --- | --- | --- |
|  [animatedExtrusionHandler](./harp-mapview.mapview.animatedextrusionhandler.md) |  | [AnimatedExtrusionHandler](./harp-mapview.animatedextrusionhandler.md) | The \[\[AnimatedExtrusionHandler\]\] controls animated extrusion effect of the extruded objects in the \[\[Tile\]\] |
|  [animating](./harp-mapview.mapview.animating.md) |  | boolean | Returns <code>true</code> if this <code>MapView</code> is constantly redrawing the scene. |
|  [camera](./harp-mapview.mapview.camera.md) |  | THREE.PerspectiveCamera | The THREE.js camera used by this <code>MapView</code> to render the main scene.  When modifying the camera all derived properties like: - \[\[MapView.target\]\] - \[\[MapView.zoomLevel\]\] - \[\[MapView.tilt\]\] - \[\[MapView.heading\]\] could change. These properties are cached internaly and will only be updated in the next animation frame. FIXME: Unfortunatley THREE.js is not dispatching any events when camera properties change so we should have an API for enforcing update of cached values. |
|  [cameraIsMoving](./harp-mapview.mapview.cameraismoving.md) |  | boolean | Returns <code>true</code> if the camera moved in the last frame. |
|  [cameraMovementDetector](./harp-mapview.mapview.cameramovementdetector.md) |  | [CameraMovementDetector](./harp-mapview.cameramovementdetector.md) |  The \[\[CameraMovementDetector\]\] detects camera movements. Made available for performance measurements. |
|  [canvas](./harp-mapview.mapview.canvas.md) |  | HTMLCanvasElement | The HTML canvas element used by this <code>MapView</code>. |
|  [clearAlpha](./harp-mapview.mapview.clearalpha.md) |  | number | The alpha used to clear the view. |
|  [clearColor](./harp-mapview.mapview.clearcolor.md) |  | number | The color used to clear the view. |
|  [clipPlanesEvaluator](./harp-mapview.mapview.clipplanesevaluator.md) |  | [ClipPlanesEvaluator](./harp-mapview.clipplanesevaluator.md) | Get camera clipping planes evaluator used. |
|  [collisionDebugCanvas](./harp-mapview.mapview.collisiondebugcanvas.md) |  | HTMLCanvasElement \| undefined | The HTML canvas element used by this <code>MapView</code>. |
|  [copyrightInfo](./harp-mapview.mapview.copyrightinfo.md) |  | [CopyrightInfo](./harp-mapview.copyrightinfo.md)<!-- -->\[\] |  |
|  [dataSources](./harp-mapview.mapview.datasources.md) |  | [DataSource](./harp-mapview.datasource.md)<!-- -->\[\] | Returns \[\[DataSource\]\]s displayed by this <code>MapView</code>. |
|  [disableFading](./harp-mapview.mapview.disablefading.md) |  | boolean |  |
|  [dynamicPixelRatio](./harp-mapview.mapview.dynamicpixelratio.md) |  | number \| undefined |  |
|  [elevationProvider](./harp-mapview.mapview.elevationprovider.md) |  | [ElevationProvider](./harp-mapview.elevationprovider.md) \| undefined | Returns the elevation provider. |
|  [enableMixedLod](./harp-mapview.mapview.enablemixedlod.md) |  | boolean \| undefined |  |
|  [env](./harp-mapview.mapview.env.md) |  | [Env](./harp-datasource-protocol.env.md) | Environment used to evaluate dynamic scene expressions. |
|  [extendedFrustumCulling](./harp-mapview.mapview.extendedfrustumculling.md) |  | boolean | Specfies whether extended frustum culling is enabled or disabled. |
|  [focalLength](./harp-mapview.mapview.focallength.md) |  | number | The distance (in pixels) between the screen and the camera. |
|  [fog](./harp-mapview.mapview.fog.md) |  | [MapViewFog](./harp-mapview.mapviewfog.md) | Public access to \[\[MapViewFog\]\] allowing to toggle it by setting its <code>enabled</code> property. |
|  [forceCameraAspect](./harp-mapview.mapview.forcecameraaspect.md) |  | number \| undefined | Gets the value of the forced custom camera aspect. Every time a frame is rendered, <code>MapView</code> resets the camera aspect.<!-- -->You can disable this behavior by setting the value to <code>undefined</code>. |
|  [frameNumber](./harp-mapview.mapview.framenumber.md) |  | number |  Return current frame number. |
|  [heading](./harp-mapview.mapview.heading.md) |  | number | Returns heading angle in degrees. |
|  [imageCache](./harp-mapview.mapview.imagecache.md) |  | [MapViewImageCache](./harp-mapview.mapviewimagecache.md) | Get the \[\[ImageCache\]\] that belongs to this <code>MapView</code>. |
|  [isDynamicFrame](./harp-mapview.mapview.isdynamicframe.md) |  | boolean | Returns <code>true</code> if the current frame will immediately be followed by another frame. |
|  [languages](./harp-mapview.mapview.languages.md) |  | string\[\] \| undefined | Lists the ISO 639-1 language codes for DataSources to use. |
|  [lights](./harp-mapview.mapview.lights.md) |  | THREE.Light\[\] |  |
|  [lockVisibleTileSet](./harp-mapview.mapview.lockvisibletileset.md) |  | boolean | Returns the status of frustum culling after each update. |
|  [mapAnchors](./harp-mapview.mapview.mapanchors.md) |  | THREE.Object3D | The node in this MapView's scene containing the user \[\[MapAnchor\]\]s. All (first level) children of this node will be positioned in world space according to the \[\[MapAnchor.geoPosition\]\]. Deeper level children can be used to position custom objects relative to the anchor node. |
|  [mapRenderingManager](./harp-mapview.mapview.maprenderingmanager.md) |  | [IMapRenderingManager](./harp-mapview.imaprenderingmanager.md) | The instance of \[\[MapRenderingManager\]\] managing the rendering of the map. It is a public property to allow access and modification of some parameters of the rendering process at runtime. |
|  [maxFps](./harp-mapview.mapview.maxfps.md) |  | number | Maximum FPS (Frames Per Second). If VSync in enabled, the specified number may not be reached, but instead the next smaller number than <code>maxFps</code> that is equal to the refresh rate divided by an integer number.<!-- -->E.g.: If the monitors refresh rate is set to 60hz, and if <code>maxFps</code> is set to a value of <code>40</code> (60hz/1.5), the actual used FPS may be 30 (60hz/2). For displays that have a refresh rate of 60hz, good values for <code>maxFps</code> are 30, 20, 15, 12, 10, 6, 3 and 1. A value of <code>0</code> is ignored. |
|  [maxZoomLevel](./harp-mapview.mapview.maxzoomlevel.md) |  | number | The maximum zoom level. Default is 14. |
|  [minCameraHeight](./harp-mapview.mapview.mincameraheight.md) |  | number | The minimum camera height in meters. |
|  [minZoomLevel](./harp-mapview.mapview.minzoomlevel.md) |  | number | The minimum zoom level. |
|  [nativeWebglAntialiasEnabled](./harp-mapview.mapview.nativewebglantialiasenabled.md) |  | boolean | Returns <code>true</code> if the native WebGL antialiasing is enabled. <code>true</code> for <code>pixelRatio</code> &lt; <code>2.0</code>, <code>false</code> otherwise. |
|  [pickHandler](./harp-mapview.mapview.pickhandler.md) |  | PickHandler | Get the \[\[PickHandler\]\] for this <code>mapView</code>. |
|  [pixelRatio](./harp-mapview.mapview.pixelratio.md) |  | number |  |
|  [pixelToWorld](./harp-mapview.mapview.pixeltoworld.md) |  | number | Returns the ratio between a pixel and a world unit for the current camera (in the center of the camera projection). |
|  [poiManager](./harp-mapview.mapview.poimanager.md) |  | [PoiManager](./harp-mapview.poimanager.md) |  Get the \[\[PoiManager\]\] that belongs to this <code>MapView</code>. |
|  [pointOfView](./harp-mapview.mapview.pointofview.md) |  | THREE.PerspectiveCamera \| undefined | Gets the optional camera used to render the scene. |
|  [poiTableManager](./harp-mapview.mapview.poitablemanager.md) |  | [PoiTableManager](./harp-mapview.poitablemanager.md) |  Get the array of \[\[PoiTableManager\]\] that belongs to this <code>MapView</code>. |
|  [politicalView](./harp-mapview.mapview.politicalview.md) |  | string \| undefined | Get currently presented political point of view - the country code. Country code is stored in lower-case ISO 3166-1 alpha-2 standard.  Country code or undefined if default (majorly accepted) point of view is used. |
|  [postEffects](./harp-mapview.mapview.posteffects.md) |  | [PostEffects](./harp-datasource-protocol.posteffects.md) \| undefined | The abstraction of the \[\[MapRenderingManager\]\] API for post effects. |
|  [projection](./harp-mapview.mapview.projection.md) |  | [Projection](./harp-geoutils.projection.md) | The projection used to project geo coordinates to world coordinates. |
|  [renderer](./harp-mapview.mapview.renderer.md) |  | THREE.WebGLRenderer | The THREE.js <code>WebGLRenderer</code> used by this scene. |
|  [renderLabels](./harp-mapview.mapview.renderlabels.md) |  | boolean |  |
|  [resourceComputationType](./harp-mapview.mapview.resourcecomputationtype.md) |  | [ResourceComputationType](./harp-mapview.resourcecomputationtype.md) | The way the cache usage is computed, either based on size in MB (mega bytes) or in number of tiles. |
|  [scene](./harp-mapview.mapview.scene.md) |  | THREE.Scene | The THREE.js scene used by this <code>MapView</code>. |
|  [shadowsEnabled](./harp-mapview.mapview.shadowsenabled.md) |  | boolean |  |
|  [storageLevel](./harp-mapview.mapview.storagelevel.md) |  | number | Returns the storage level for the given camera setup. Actual storage level of the rendered data also depends on \[\[DataSource.storageLevelOffset\]\]. |
|  [target](./harp-mapview.mapview.target.md) |  | [GeoCoordinates](./harp-geoutils.geocoordinates.md) | Get geo coordinates of camera focus (target) point. This point is not necessarily on the ground, i.e.: - if the tilt is high and projection is \[\[sphereProjection\]\] - if the camera was modified directly and is not pointing to the ground. In any case the projection of the target point will be in the center of the screen. |
|  [textElementsRenderer](./harp-mapview.mapview.textelementsrenderer.md) |  | [TextElementsRenderer](./harp-mapview.textelementsrenderer.md) |  The \[\[TextElementsRenderer\]\] select the visible \[\[TextElement\]\]s and renders them. |
|  [theme](./harp-mapview.mapview.theme.md) |  | [Theme](./harp-datasource-protocol.theme.md) | Gets the current <code>Theme</code> used by this <code>MapView</code> to style map elements. |
|  [tileGeometryManager](./harp-mapview.mapview.tilegeometrymanager.md) |  | TileGeometryManager \| undefined | The \[\[TileGeometryManager\]\] manages geometry during loading and handles hiding geometry of specified \[\[GeometryKind\]\]s. |
|  [tilt](./harp-mapview.mapview.tilt.md) |  | number | Returns tilt angle in degrees. |
|  [updatePending](./harp-mapview.mapview.updatepending.md) |  | boolean | Returns <code>true</code> if an update has already been requested, such that after a currently rendering frame, the next frame will be rendered immediately. |
|  [uriResolver](./harp-mapview.mapview.uriresolver.md) |  | [UriResolver](./harp-utils.uriresolver.md) \| undefined | \[\[UriResolver\]\] used to resolve application/deployment specific <code>URI</code>s into actual <code>URLs</code> that can be loaded with <code>fetch</code>. |
|  [viewportHeight](./harp-mapview.mapview.viewportheight.md) |  | number | Returns height of the viewport in pixels. |
|  [visibleTileSet](./harp-mapview.mapview.visibletileset.md) |  | [VisibleTileSet](./harp-mapview.visibletileset.md) | Access the <code>VisibleTileSet</code> to get access to all current datasources and their visible tiles. |
|  [worldCenter](./harp-mapview.mapview.worldcenter.md) |  | THREE.Vector3 | The position in world coordinates of the center of the scene. |
|  [worldToPixel](./harp-mapview.mapview.worldtopixel.md) |  | number | Returns the ratio between a world and a pixel unit for the current camera (in the center of the camera projection). |
|  [zoomLevel](./harp-mapview.mapview.zoomlevel.md) |  | number | Returns the zoom level for the given camera setup. |

## Methods

|  Method | Modifiers | Description |
|  --- | --- | --- |
|  [addDataSource(dataSource)](./harp-mapview.mapview.adddatasource.md) |  | Adds a new \[\[DataSource\]\] to this <code>MapView</code>. <code>MapView</code> needs at least one \[\[DataSource\]\] to display something. |
|  [addEventListener(type, listener)](./harp-mapview.mapview.addeventlistener.md) |  | Adds an event listener. There are various events that are sent before or after a new frame is rendered. \[\[MapViewEventNames\]\]. |
|  [addOverlayText(textElements)](./harp-mapview.mapview.addoverlaytext.md) |  | Adds new overlay text elements to this <code>MapView</code>. |
|  [beginAnimation()](./harp-mapview.mapview.beginanimation.md) |  | Begin animating the scene. |
|  [clearElevationSource(elevationSource)](./harp-mapview.mapview.clearelevationsource.md) |  | Clears any elevation sources and provider previously set. |
|  [clearOverlayText()](./harp-mapview.mapview.clearoverlaytext.md) |  | Adds new overlay text elements to this <code>MapView</code>. |
|  [clearTileCache(dataSourceName)](./harp-mapview.mapview.cleartilecache.md) |  | Clear the tile cache.<!-- -->Remove the \[\[Tile\]\] objects created by cacheable \[\[DataSource\]\]s. If a \[\[DataSource\]\] name is provided, this method restricts the eviction the \[\[DataSource\]\] with the given name. |
|  [dispose()](./harp-mapview.mapview.dispose.md) |  | Disposes this <code>MapView</code>.<!-- -->This function cleans the resources that are managed manually including those that exist in shared caches.<!-- -->Note: This function does not try to clean objects that can be disposed off easily by TypeScript's garbage collecting mechanism. Consequently, if you need to perform a full cleanup, you must ensure that all references to this <code>MapView</code> are removed. |
|  [endAnimation()](./harp-mapview.mapview.endanimation.md) |  | Stop animating the scene. |
|  [forEachCachedTile(visitor)](./harp-mapview.mapview.foreachcachedtile.md) |  | Apply a visitor function to all tiles in the cache. |
|  [forEachVisibleTile(fun)](./harp-mapview.mapview.foreachvisibletile.md) |  | Apply visitor to all visible tiles. |
|  [getCacheSize()](./harp-mapview.mapview.getcachesize.md) |  | Returns the cache size. |
|  [getDataSourceByName(dataSourceName)](./harp-mapview.mapview.getdatasourcebyname.md) |  | Returns the unique \[\[DataSource\]\] matching the given name. |
|  [getDataSourcesByStyleSetName(styleSetName)](./harp-mapview.mapview.getdatasourcesbystylesetname.md) |  | Returns the array of \[\[DataSource\]\]s referring to the same \[\[StyleSet\]\]. |
|  [getGeoCoordinatesAt(x, y)](./harp-mapview.mapview.getgeocoordinatesat.md) |  | Returns the \[\[GeoCoordinates\]\] from the given screen position. The return value can be <code>null</code>, in case the camera is facing the horizon and the given <code>(x, y)</code> value is not intersecting the ground plane. |
|  [getNormalizedScreenCoordinates(x, y)](./harp-mapview.mapview.getnormalizedscreencoordinates.md) |  | Returns the normalized screen coordinates from the given pixel position. |
|  [getScreenPosition(geoPos)](./harp-mapview.mapview.getscreenposition.md) |  | Returns the screen position of the given geo coordinates. |
|  [getWorldPositionAt(x, y)](./harp-mapview.mapview.getworldpositionat.md) |  | Returns the world space position from the given screen position. The return value can be <code>null</code>, in case the camera is facing the horizon and the given <code>(x, y)</code> value is not intersecting the ground plane. |
|  [intersectMapObjects(x, y)](./harp-mapview.mapview.intersectmapobjects.md) |  | Do a raycast on all objects in the scene. Useful for picking. Limited to objects that THREE.js can raycast, the solid lines that get their geometry in the shader cannot be tested for intersection.<!-- -->Note, if a \[\[DataSource\]\] adds an \[\[Object3D\]\] to a \[\[Tile\]\], it will be only pickable once \[\[MapView.render\]\] has been called, this is because \[\[MapView.render\]\] method creates the internal three.js root \[\[Object3D\]\] which is used in the \[\[PickHandler\]\] internally. This method will not test for intersection custom objects added to the scene by for example calling directly the \[\[scene.add\]\] method from THREE. |
|  [isDataSourceEnabled(dataSource)](./harp-mapview.mapview.isdatasourceenabled.md) |  | Returns true if the specified \[\[DataSource\]\] is enabled. |
|  [loadPostEffects(postEffectsFile)](./harp-mapview.mapview.loadposteffects.md) |  | Loads a post effects definition file. |
|  [lookAt(params)](./harp-mapview.mapview.lookat.md) |  | Adjusts the camera to look at a given geo coordinate with tilt and heading angles.<!-- -->\#\#\#\# Note on <code>target</code> and <code>bounds</code>If <code>bounds</code> are specified, <code>zoomLevel</code> and <code>distance</code> parameters are ignored and <code>lookAt</code> calculates best zoomLevel (and possibly target) to fit given bounds.<!-- -->Following table shows how relation between <code>bounds</code> and target.<!-- -->\| <code>bounds</code> \| <code>target</code> \| actual <code>target</code> \| \-\-\-\-\-\- \| \-\-\-\-\-\- \| \-\-\-\-\-\--- \| \[\[GeoBox\]\] \| \_defined\_ \| <code>params.target</code> is used \| \[\[GeoBox\]\] \| <code>undefined</code> \| <code>bounds.center</code> is used as new <code>target</code> \| \[\[GeoBoxExtentLike\]\] \| <code>undefined</code> \| current <code>MapView.target</code> is used \| \[\[GeoBoxExtentLike\]\] \| \_defined\_ \| <code>params.target</code> is used \| \[\[GeoCoordLike\]\]\[\] \| <code>undefined</code> \| new <code>target</code> is calculated as center of world box covering given points \| \[\[GeoCoordLike\]\]\[\] \| \_defined\_ \| <code>params.target</code> is used and zoomLevel is adjusted to view all given geo points<!-- -->In each case, <code>lookAt</code> finds minimum <code>zoomLevel</code> that covers given extents or geo points.<!-- -->With flat projection, if <code>bounds</code> represents points on both sides of antimeridian, and \[\[MapViewOptions.tileWrappingEnabled\]\] is used, <code>lookAt</code> will use this knowledge and find minimal view that may cover "next" or "previous" world.<!-- -->With sphere projection if <code>bounds</code> represents points on both sides of globe, best effort method is used to find best <code>target</code>\`<!-- -->.<!-- -->\#\#\#\# Examples
```
mapView.lookAt({heading: 90})
    // look east retaining current `target`, `zoomLevel` and `tilt`

mapView.lookAt({lat: 40.707, lng: -74.01})
   // look at Manhattan, New York retaining other view params

mapView.lookAt(bounds: { latitudeSpan: 10, longitudeSpan: 10})
   // look at current `target`, but extending zoomLevel so we see 10 degrees of lat/long span

```
 More examples in \[\[LookAtExample\]\]. |
|  [lookAt(target, distance, tiltDeg, headingDeg)](./harp-mapview.mapview.lookat_1.md) |  | The method that sets the camera to the desired angle (<code>tiltDeg</code>) and <code>distance</code> (in meters) to the <code>target</code> location, from a certain heading (<code>headingAngle</code>). |
|  [markTilesDirty(dataSource)](./harp-mapview.mapview.marktilesdirty.md) |  | Visit each tile in visible, rendered, and cached sets.<!-- -->\* Visible and temporarily rendered tiles will be marked for update and retained. \* Cached but not rendered/visible will be evicted. |
|  [removeDataSource(dataSource)](./harp-mapview.mapview.removedatasource.md) |  | Removes \[\[DataSource\]\] from this <code>MapView</code>. |
|  [removeDynamicProperty(name)](./harp-mapview.mapview.removedynamicproperty.md) |  | Removes the given dynamic property from this \[\[MapView\]\].<!-- -->Property names starting with a <code>$</code>-sign are reserved and any attempt to change their value will result in an error. |
|  [removeEventListener(type, listener)](./harp-mapview.mapview.removeeventlistener.md) |  | Removes an event listener. There are various events that are sent before or after a new frame is rendered. \[\[MapViewEventNames\]\]. |
|  [renderSync(frameStartTime)](./harp-mapview.mapview.rendersync.md) |  | Redraws scene immediately Before using this method, set <code>synchronousRendering</code> to <code>true</code> in the \[\[MapViewOptions\]\] |
|  [requestUpdateIfNeeded()](./harp-mapview.mapview.requestupdateifneeded.md) |  | Requests a redraw of the scene. |
|  [resetFrameNumber()](./harp-mapview.mapview.resetframenumber.md) |  |  Reset the frame number to 0. |
|  [resize(width, height)](./harp-mapview.mapview.resize.md) |  | Resize the HTML canvas element and the THREE.js <code>WebGLRenderer</code>. |
|  [setCacheSize(size, numVisibleTiles)](./harp-mapview.mapview.setcachesize.md) |  | Sets the cache size in number of tiles. |
|  [setCameraGeolocationAndZoom(geoPos, zoomLevel, yawDeg, pitchDeg)](./harp-mapview.mapview.setcamerageolocationandzoom.md) |  | Moves the camera to the specified \[\[GeoCoordinates\]\], sets the desired <code>zoomLevel</code> and adjusts the yaw and pitch. The pitch of the camera is always curbed so that the camera cannot look above the horizon. This paradigm is necessary in \[\[MapControls\]\], where the center of \\ the screen is used for the orbiting interaction (3 fingers / right mouse button). |
|  [setDynamicProperty(name, value)](./harp-mapview.mapview.setdynamicproperty.md) |  | Updates the value of a dynamic property.<!-- -->Property names starting with a <code>$</code>-sign are reserved and any attempt to change their value will result in an error.<!-- -->Themes can access dynamic properties using the <code>Expr</code> operator <code>[&quot;dynamic-properties&quot;]</code>, for example:<code>[&quot;get&quot;, &quot;property name&quot;, [&quot;dynamic-properties&quot;]]</code> |
|  [setElevationSource(elevationSource, elevationRangeSource, elevationProvider)](./harp-mapview.mapview.setelevationsource.md) |  | Sets the DataSource which contains the elevations, the elevation range source, and the elevation provider. Only a single elevation source is possible per \[\[MapView\]\]<!-- -->If the terrain-datasource is merged with this repository, we could internally construct the \[\[ElevationRangeSource\]\] and the \[\[ElevationProvider\]\] and access would be granted to the application when it asks for it, to simplify the API. |
|  [setFovCalculation(fovCalculation)](./harp-mapview.mapview.setfovcalculation.md) |  | Set's the way in which the fov is calculated on the map view. Note, for this to take visual effect, the map should be rendered after calling this function. |
|  [update()](./harp-mapview.mapview.update.md) |  | Requests a redraw of the scene. |

